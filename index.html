<html>
	<head>
		<title>Login required</title>
		<link href='http://fonts.googleapis.com/css?family=Roboto+Condensed:300' rel='stylesheet' type='text/css'>
		<link rel="stylesheet" type="text/css" href="css/style.css" />
		<script type="text/javascript">
			function init() {
				if (localStorage.getItem("tryLogin")) {
					document.getElementById("error").className += "show";
					localStorage.removeItem("tryLogin");
				}
				document.getElementById("password").focus();

				if(getRequestParam("target")) {
				    form = document.getElementById("loginform")
					form.action = getRequestParam("target")
				}

				if(getRequestParam("title")) {
					title = document.getElementById("title")
					title.innerHTML = getRequestParam("title")
				}
			}
			
			function tryLogin() {
				localStorage.setItem("tryLogin", true);	
			}

            function getRequestParam(name){
                if(name=(new RegExp('[?&]'+encodeURIComponent(name)+'=([^&]*)')).exec(location.search)) {
                    return decodeURIComponent(name[1]);
                }
            }


		</script>
	</head>
	<body onload="init()">
		<div id="content">
			<h1><span id="title">Please enter your credentials</span></h1>
			<form method="POST" id="loginform" action="" onsubmit="tryLogin()">
				<label for="username">Username</label><input type="text" id="username" name="httpd_username" />
				<label for="password">Password</label><input type="password" id="password" name="httpd_password" value="" />
				<input type="submit" name="login" value="Login" />
			</form>

			<p id="error">Some error occurred on logging in. Were your password and username correct?</p>
		</div>
	</body>
</html>
